{% extends "report/base.html" %}
{% load static nvd3_tags %}

{% block extrahead %}
	{{ block.super }}
	<link media="all" href="{% static 'nvd3/src/nv.d3.css' %}" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src='{% static 'd3/d3.min.js' %}'></script>
	<script type="text/javascript" src='{% static 'nvd3/nv.d3.min.js' %}'></script>
	<script>
		$(function(){
			$.get('/api/reports/chartstats/?app=hosts&model=Host&column=changed', function(data){
				$("#hoststats").append(data);
			});
			$.get('/api/reports/chartstats/?app=network&model=Lease&column=starts', function(data){
				$("#leasestats").append(data);
			});
			$.get('/api/reports/chartstats/?app=dns&model=DnsRecord&column=changed', function(data){
				$("#dnsstats").append(data);
			});
			$.get('/api/reports/chartstats/?app=user&model=User&column=last_login', function(data){
				$("#userstats").append(data);
			});			
			$("#dashboard_link").addClass('active');
		});
	</script>
	<style type="text/css">
		svg {
			background: #454545;
		}
		svg text {
			fill: #fff !important;
		}
		.nvd3 .nv-axis line {
			stroke: #999 !important;
		}
		.nvd3 .nv-axis path {
			stroke: #999 !important;
		}
		.window {
			background: #454545;
			padding: 30px;
			margin: 10px 0px 10px 20px;
		}
		.panel {
			background-color: #222222;
		}
	</style>
{% endblock %}

{% block content %}
	<div class="window pull-left panel panel-primary">
		<div class="panel-heading">Host Updated</div>
		<div id="hoststats" class="bottom20"></div>
		<div class="panel-heading">Leases Updated</div>
		<div id="leasestats"></div>
	</div>	

	<div class="window pull-left panel panel-primary">
		<div class="panel-heading">DNS Records Updated</div>
		<div id="dnsstats" class="bottom20"></div>
		<div class="panel-heading">Active Users</div>
		<div id="userstats"></div>
	</div>

{% endblock %}
